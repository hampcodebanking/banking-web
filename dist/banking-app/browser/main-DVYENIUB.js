import{a as ht}from"./chunk-7B4TWPQK.js";import{a as C}from"./chunk-UUFD72BD.js";import{A as _t,C as xt,D as E,E as wt,F as St,G as Pt,H as Dt,I as Tt,J as kt,K as It,L as Ot,M as Et,N as Ft,P as At,Q as Nt,a as st,aa as Rt,ba as jt,c as ct,ca as Vt,d as lt,e as mt,ea as Bt,f as dt,g as pt,i as ut,j as y,k as ft,l as B,n as gt,p as yt,q as Ct,r as Mt,t as bt,v as vt}from"./chunk-YOIIVQ5A.js";import{$b as V,Ab as a,Bb as u,Cc as nt,Fb as S,Ia as G,Ib as v,Kb as P,Kc as rt,Mc as ot,Nc as at,Rb as D,Sb as l,Ub as _,Vb as N,Wa as d,Wb as R,Xa as M,Xb as j,Y as W,Ya as $,Z as z,_a as X,aa as T,ab as Y,ba as k,bc as et,cb as Z,cc as it,db as J,fa as A,ga as w,la as b,ma as I,nb as O,oa as U,pb as g,ta as f,ua as h,ub as K,vb as Q,xb as q,yb as tt,zb as c}from"./chunk-OXWYM4U2.js";function Jt(n,t){if(n&1){let r=S();c(0,"mat-card",12)(1,"mat-card-header")(2,"mat-card-title"),l(3),a(),c(4,"mat-card-subtitle"),l(5),a()(),u(6,"img",13),c(7,"mat-card-content")(8,"p",14),l(9),V(10,"currency"),u(11,"br"),l(12),V(13,"date"),a()(),c(14,"mat-card-actions",15)(15,"button",16),v("click",function(){let i=f(r).$implicit,o=P(2);return h(o.viewTransactionDetails(i.id))}),l(16,"Ver Detalles"),a()()()}if(n&2){let r=t.$implicit;d(3),_("Transacci\xF3n ",r.id,""),d(2),_("Para: ",r.targetAccount.accountNumber,""),d(4),_(" Monto: ",it(10,4,r.amount,"USD","symbol","1.2-2")," "),d(3),_(" Fecha: ",et(13,9,r.transactionDate,"yyyy-MM-dd")," ")}}function Kt(n,t){if(n&1&&(c(0,"div",11),q(1,Jt,17,12,"mat-card",12,Q),a()),n&2){let r=P();d(),tt(r.filteredTransactions)}}function Qt(n,t){n&1&&(c(0,"p"),l(1,"No hay transacciones disponibles."),a())}var Lt=(()=>{let t=class t{constructor(e,i,o){this.authService=e,this.transactionService=i,this.router=o,this.userFullName="",this.transactions=[],this.filteredTransactions=[],this.startDate=null,this.endDate=null}ngOnInit(){this.userFullName=`${this.authService.auth()?.user.firstName} ${this.authService.auth()?.user.lastName}`,this.getTransactionData()}getTransactionData(){this.transactionService.getAllTransactionsByCustomer().subscribe({next:e=>{this.transactions=e,this.filteredTransactions=e},error:e=>{console.error("Error al obtener las transacciones:",e)}})}applyDateFilter(){if(this.startDate&&this.endDate){let e=new Date(this.startDate).setHours(0,0,0,0),i=new Date(this.endDate).setHours(23,59,59,999);this.filteredTransactions=this.transactions.filter(o=>{let s=new Date(o.transactionDate).getTime();return s>=e&&s<=i})}else this.filteredTransactions=this.transactions}showAllTransactions(){this.filteredTransactions=this.transactions,this.startDate=null,this.endDate=null}viewTransactionDetails(e){this.router.navigate(["/transaction/details",e])}};t.\u0275fac=function(i){return new(i||t)(M(C),M(ht),M(y))},t.\u0275cmp=b({type:t,selectors:[["app-home"]],decls:27,vars:8,consts:[["startPicker",""],["endPicker",""],[1,"container","py-5"],[1,"fw-bold","text-center"],[1,"container"],[1,"date-range"],["appearance","fill",1,"datepicker"],["matInput","",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],[1,"card-container"],[1,"example-card"],["mat-card-image","","src","https://material.angular.io/assets/img/examples/shiba2.jpg","alt","Imagen de ejemplo"],[1,"transaction-info"],[1,"card-actions"],["mat-button","",1,"primary-button",3,"click"]],template:function(i,o){if(i&1){let s=S();c(0,"div",2)(1,"h1",3),l(2),a()(),c(3,"div",4)(4,"h2"),l(5,"\xDAltimas Transacciones"),a(),c(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),l(9,"Fecha de inicio"),a(),c(10,"input",7),j("ngModelChange",function(p){return f(s),R(o.startDate,p)||(o.startDate=p),h(p)}),a(),u(11,"mat-datepicker-toggle",8)(12,"mat-datepicker",null,0),a(),c(14,"mat-form-field",6)(15,"mat-label"),l(16,"Fecha de fin"),a(),c(17,"input",7),j("ngModelChange",function(p){return f(s),R(o.endDate,p)||(o.endDate=p),h(p)}),a(),u(18,"mat-datepicker-toggle",8)(19,"mat-datepicker",null,1),a(),c(21,"button",9),v("click",function(){return f(s),h(o.applyDateFilter())}),l(22,"Filtrar"),a(),c(23,"button",10),v("click",function(){return f(s),h(o.showAllTransactions())}),l(24,"Todos"),a()(),O(25,Kt,3,0,"div",11)(26,Qt,2,0),a()}if(i&2){let s=D(13),m=D(20);d(2),_("Bienvenido a Banking, ",o.userFullName,""),d(8),g("matDatepicker",s),N("ngModel",o.startDate),d(),g("for",s),d(6),g("matDatepicker",m),N("ngModel",o.endDate),d(),g("for",m),d(7),K(25,o.filteredTransactions.length>0?25:26)}},dependencies:[Ct,xt,gt,yt,E,wt,Tt,Pt,kt,It,Dt,St,Ot,Et,Ft,Mt,bt,vt,at,ot],styles:[".container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding-top:20px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{color:#333;text-align:center;margin-bottom:24px}.input-group[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{flex:1}.input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-left:10px}.date-range[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:20px}.card-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px;justify-content:space-between}.mat-card[_ngcontent-%COMP%]{width:100%;max-width:250px;box-shadow:0 4px 8px #0000001a;border-radius:8px;overflow:hidden}.mat-card-title[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:.5rem}.transaction-info[_ngcontent-%COMP%]{font-size:.9rem;color:#666;margin-bottom:1rem}.card-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:8px;background-color:#f5f5f5}.card-actions[_ngcontent-%COMP%]   button.primary-button[_ngcontent-%COMP%]{color:#fff;background-color:#1976d2}.card-actions[_ngcontent-%COMP%]   button.primary-button[_ngcontent-%COMP%]:hover{background-color:#0056d3}@media (max-width: 768px){.card-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}}@media (max-width: 576px){.card-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(150px,1fr))}}.datepicker[_ngcontent-%COMP%]{width:100%}"]});let n=t;return n})();var F=(n,t)=>{let r=w(C),e=w(y);return r.auth()?.user.role==="USER"?!0:(e.navigate([""]),!1)};var qt=[{path:"",loadChildren:()=>import("./chunk-H6C4ZMJD.js").then(n=>n.UserModule)},{path:"home",component:Lt,canActivate:[F]},{path:"transaction",loadChildren:()=>import("./chunk-C2UYRR56.js").then(n=>n.TransactionModule),canActivate:[F]},{path:"account",loadChildren:()=>import("./chunk-4SGEL2J5.js").then(n=>n.AccountModule),canActivate:[F]}],Wt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=I({type:t}),t.\u0275inj=k({imports:[B.forRoot(qt),B]});let n=t;return n})();function te(n,t){if(n&1){let r=S();c(0,"mat-toolbar",2)(1,"span"),l(2,"Banking HampCode"),a(),c(3,"button",3),l(4," Inicio "),a(),c(5,"button",4),l(6," Cuenta bancaria "),a(),c(7,"button",5),l(8," Operaciones "),a(),u(9,"span",6),c(10,"button",7)(11,"mat-icon"),l(12,"account_circle"),a()(),c(13,"mat-menu",null,0)(15,"button",8),v("click",function(){f(r);let i=P();return h(i.logout())}),c(16,"mat-icon"),l(17,"logout"),a(),l(18," Cerrar sesi\xF3n "),a()()()}if(n&2){let r=D(14);d(10),g("matMenuTriggerFor",r)}}var zt=(()=>{let t=class t{constructor(e,i){this.authService=e,this.router=i}logout(){this.authService.logout(),this.router.navigate([""])}isLoggedIn(){return!!this.authService.auth()?.user}};t.\u0275fac=function(i){return new(i||t)(M(C),M(y))},t.\u0275cmp=b({type:t,selectors:[["app-navbar"]],decls:1,vars:1,consts:[["userMenu",""],["color","primary",4,"ngIf"],["color","primary"],["mat-button","","routerLink","/home",1,"ms-3"],["mat-button","","routerLink","/account",1,"ms-3"],["mat-button","",1,"ms-3"],[1,"spacer"],["mat-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"]],template:function(i,o){i&1&&O(0,te,19,1,"mat-toolbar",1),i&2&&g("ngIf",o.isLoggedIn())},dependencies:[rt,ft,E,Nt,At,jt,Rt,Vt],styles:["mat-toolbar[_ngcontent-%COMP%]{background-color:#009739;color:#fff;display:flex;justify-content:space-between;align-items:center;padding:0 16px}mat-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:16px;color:#fff}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.ms-3[_ngcontent-%COMP%]{margin-left:16px}mat-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-right:8px;color:#fff}button[mat-button][_ngcontent-%COMP%]{display:flex;align-items:center;color:#000}mat-menu[_ngcontent-%COMP%]{background-color:#fff;color:#000}mat-menu[_ngcontent-%COMP%]   button[mat-menu-item][_ngcontent-%COMP%]{display:flex;align-items:center;color:#000}"]});let n=t;return n})();var Ut=(()=>{let t=class t{constructor(){this.title="banking-app"}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=b({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(i,o){i&1&&u(0,"app-navbar")(1,"router-outlet")},dependencies:[ut,zt]});let n=t;return n})();var ie="@",ne=(()=>{let t=class t{constructor(e,i,o,s,m){this.doc=e,this.delegate=i,this.zone=o,this.animationType=s,this.moduleImpl=m,this._rendererFactoryPromise=null,this.scheduler=w(X,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-S4N7VWSF.js")).catch(i=>{throw new z(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:o})=>{this._engine=i(this.animationType,this.doc,this.scheduler);let s=new o(this.delegate,this._engine,this.zone);return this.delegate=s,s})}createRenderer(e,i){let o=this.delegate.createRenderer(e,i);if(o.\u0275type===0)return o;typeof o.throwOnSyntheticProps=="boolean"&&(o.throwOnSyntheticProps=!1);let s=new L(o);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(m=>{let p=m.createRenderer(e,i);s.use(p)}).catch(m=>{s.use(o)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};t.\u0275fac=function(i){$()},t.\u0275prov=T({token:t,factory:t.\u0275fac});let n=t;return n})(),L=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let r of this.replay)r(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,r){return this.delegate.createElement(t,r)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,r){this.delegate.appendChild(t,r)}insertBefore(t,r,e,i){this.delegate.insertBefore(t,r,e,i)}removeChild(t,r,e){this.delegate.removeChild(t,r,e)}selectRootElement(t,r){return this.delegate.selectRootElement(t,r)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,r,e,i){this.delegate.setAttribute(t,r,e,i)}removeAttribute(t,r,e){this.delegate.removeAttribute(t,r,e)}addClass(t,r){this.delegate.addClass(t,r)}removeClass(t,r){this.delegate.removeClass(t,r)}setStyle(t,r,e,i){this.delegate.setStyle(t,r,e,i)}removeStyle(t,r,e){this.delegate.removeStyle(t,r,e)}setProperty(t,r,e){this.shouldReplay(r)&&this.replay.push(i=>i.setProperty(t,r,e)),this.delegate.setProperty(t,r,e)}setValue(t,r){this.delegate.setValue(t,r)}listen(t,r,e){return this.shouldReplay(r)&&this.replay.push(i=>i.listen(t,r,e)),this.delegate.listen(t,r,e)}shouldReplay(t){return this.replay!==null&&t.startsWith(ie)}};function Gt(n="animations"){return Z("NgAsyncAnimations"),U([{provide:Y,useFactory:(t,r,e)=>new ne(t,r,e,n),deps:[nt,mt,J]},{provide:G,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var $t=(()=>{let t=class t{constructor(e,i){this.authService=e,this.router=i}intercept(e,i){let o=this.authService.auth()?.token,s;if(o){let m=e.clone({headers:e.headers.set("Authorization",`Bearer ${o}`)});s=i.handle(m)}else s=i.handle(e);return s.pipe(W({error:m=>{m instanceof st&&m.status===403&&(this.authService.logout(),this.router.navigate([""]))}}))}};t.\u0275fac=function(i){return new(i||t)(A(C),A(y))},t.\u0275prov=T({token:t,factory:t.\u0275fac});let n=t;return n})();var Xt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=I({type:t,bootstrap:[Ut]}),t.\u0275inj=k({providers:[Gt(),{provide:ct,useClass:$t,multi:!0}],imports:[pt,Wt,Bt,lt,_t]});let n=t;return n})();dt().bootstrapModule(Xt).catch(n=>console.error(n));
